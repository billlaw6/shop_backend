webpackJsonp([7],{P7ry:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("3cXf"),r=o.n(s),a=o("4YfN"),n=o.n(a),i=o("P9l9"),l=o("9rMa"),m={data:function(){return{formLogin:{username:"liubin",password:"woaini2006",remember:[]},loginDataRules:{username:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:8,message:"密码长度不能小于8位",trigger:"blur"}]}}},computed:n()({},Object(l.c)({loginStatus:function(e){return e.login.loginStatus}})),methods:n()({},Object(l.b)({setToken:"setToken",setLoginStatus:"setLoginStatus",setUser:"setUser"}),{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(window.sessionStorage.removeItem("accessToken"),Object(i.a)(t.formLogin).then(function(e){var o=e.data,s=e.status,a=e.statusText;200!==s?(console.log(a),t.$Message.error("用户名或密码错误!")):(window.sessionStorage.setItem("accessToken",o.key),Object(i.f)().then(function(e){console.log(e);var o=e.data;200!==e.status?t.$Message.error("获取用户信息失败!"):(console.log(o),t.$store.dispatch("setLoginStatus",!0),t.$store.dispatch("setUser",o),window.sessionStorage.setItem("user",r()(o)),console.log(o.username))},function(e){console.log(e)}),t.$route.query.redirect?t.$router.push(t.$route.query.redirect):t.$router.push({name:"p404"}))},function(e){console.log("Error in authLogin: "+e),t.$Message.error("用户名或密码错误")}).catch(function(e){console.log("catched in authLogin:"+e),t.$Message.error("用户名或密码错误")})):t.$Message.error("表单验证失败!"),"记住密码"===t.formLogin.remember[0]?(window.sessionStorage.setItem("username",r()(t.formLogin.username)),window.sessionStorage.setItem("password",r()(t.formLogin.password))):(window.sessionStorage.removeItem("username"),window.sessionStorage.removeItem("password"))})},formLoginReset:function(e){this.$refs[e].resetFields()}}),mounted:function(){sessionStorage.getItem("username")?this.formLogin.username=JSON.parse(sessionStorage.getItem("username")):this.formLogin.username="",sessionStorage.getItem("password")?this.formLogin.password=JSON.parse(sessionStorage.getItem("password")):this.formLogin.password=""}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[o("Col",{attrs:{span:"7"}},[o("Tabs",{staticClass:"loginTabs"},[o("TabPane",{attrs:{label:"密码登录"}},[o("i-form",{ref:"formLogin",staticClass:"card-box",attrs:{model:e.formLogin,rules:e.loginDataRules}},[o("Form-item",{attrs:{prop:"username"}},[o("i-input",{attrs:{size:"large",type:"text",placeholder:"用户名",autofocus:!0},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",{attrs:{prop:"password"}},[o("i-input",{attrs:{size:"large",type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",{staticClass:"login-no-bottom"},[o("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[o("i-col",{attrs:{col:"12"}},[o("Checkbox-group",{model:{value:e.formLogin.remember,callback:function(t){e.$set(e.formLogin,"remember",t)},expression:"formLogin.remember"}},[o("Checkbox",{attrs:{label:"记住密码",name:"remember"}})],1)],1),e._v(" "),o("i-col",{attrs:{col:"12",pull:"2"}},[o("router-link",{attrs:{to:"/pass_reset"}},[e._v("忘记密码?")])],1)],1)],1),e._v(" "),o("Form-item",{staticClass:"login-no-bottom"},[o("i-button",{attrs:{type:"primary",long:!0},on:{click:function(t){e.handleSubmit("formLogin")}}},[e._v("登录")])],1)],1)],1),e._v(" "),o("TabPane",{attrs:{label:"验证码登录"}},[o("i-form",{ref:"formLogin",staticClass:"card-box",attrs:{model:e.formLogin,rules:e.loginDataRules}},[o("Form-item",{attrs:{prop:"username"}},[o("i-input",{attrs:{size:"large",type:"text",placeholder:"用户名",autofocus:!0},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",{attrs:{prop:"password"}},[o("i-input",{attrs:{size:"large",type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",{staticClass:"login-no-bottom"},[o("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[o("i-col",{attrs:{col:"12"}},[o("Checkbox-group",{model:{value:e.formLogin.remember,callback:function(t){e.$set(e.formLogin,"remember",t)},expression:"formLogin.remember"}},[o("Checkbox",{attrs:{label:"记住密码",name:"remember"}})],1)],1),e._v(" "),o("i-col",{attrs:{col:"12",pull:"2"}},[o("router-link",{attrs:{to:"/pass_reset"}},[e._v("忘记密码?")])],1)],1)],1),e._v(" "),o("Form-item",{staticClass:"login-no-bottom"},[o("i-button",{attrs:{type:"primary",long:!0},on:{click:function(t){e.handleSubmit("formLogin")}}},[e._v("登录")])],1)],1)],1)],1)],1),e._v(" "),o("Col",{staticClass:"vertical-divider",attrs:{span:"1"}},[e._v("\n    或\n  ")]),e._v(" "),o("Col",{attrs:{span:"5"}},[e._v("\n    还没有账号："),o("br"),e._v(" "),o("router-link",{attrs:{to:"/register"}},[e._v("立即注册"),o("Icon",{attrs:{type:"forward"}})],1),e._v(" "),o("br"),o("br"),o("br"),o("br"),o("br"),e._v("\n    使用以下账号直接登录："),o("br"),e._v(" "),o("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[o("i-col",{attrs:{span:"8"}},[o("Icon",{attrs:{src:"../assets/weibo.png",size:"10"}}),e._v(" "),o("a",{attrs:{href:"http://123.56.115.20/auth/login/weixin"}},[e._v("微信")])],1),e._v(" "),o("i-col",{attrs:{span:"8"}},[o("a",{attrs:{href:"http://123.56.115.20/auth/login/weibo"}},[e._v("微博")])]),e._v(" "),o("i-col",{attrs:{span:"8"}},[o("a",{attrs:{href:"http://123.56.115.20/auth/login/github"}},[e._v("GITHUB")])])],1)],1)],1)},staticRenderFns:[]};var u=o("X4nt")(m,c,!1,function(e){o("RNIC")},"data-v-101a2c8b",null);t.default=u.exports},RNIC:function(e,t){}});
//# sourceMappingURL=7.8e10b8c1fdf9e5c2efd3.js.map