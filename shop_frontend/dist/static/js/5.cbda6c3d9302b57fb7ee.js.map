{"version":3,"sources":["webpack:///src/pages/PassReset.vue","webpack:///./src/pages/PassReset.vue?b1fe","webpack:///./src/pages/PassReset.vue"],"names":["PassReset","TimerBtn","Captcha","required","message","trigger","computed","extends_default","Object","vuex_esm","loginStatus","methods","_this","this","data","res","statusText","redirect","error","resetFields","pages_PassReset","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","justify","align","span","label","current","title","content","_v","ref","model","formPhonePassReset","rules","passPhoneResetDataRules","prop","size","placeholder","autofocus","value","callback","$$v","$set","expression","slot","height","second","on","click","nextStep","formEmailPassReset","passEmailResetDataRules","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.cbda6c3d9302b57fb7ee.js","sourcesContent":["<template>\n  <Row type=\"flex\" justify=\"center\" align=\"middle\" class=\"code-row-bg\">\n    <Col span=\"12\">\n      <Tabs class=\"passResetTabs\">\n        <TabPane label=\"通过手机号找回\">\n          <Row>\n            <Steps :current=\"1\">\n              <Step title=\"01\" content=\"验证手机号\"></Step>\n              <Step title=\"02\" content=\"重置密码\"></Step>\n            </Steps>\n          </Row>\n          <Row>\n            <Form ref=\"formPhonePassReset\" :model=\"formPhonePassReset\" :rules=\"passPhoneResetDataRules\"  class=\"card-box\">\n              <FormItem prop=\"cell_phone\">\n                <Input size=\"large\" type=\"text\" v-model=\"formPhonePassReset.cell_phone\" placeholder=\"注册使用的手机号\" :autofocus=true>\n                  <span slot=\"prepend\">0086</span>\n                </Input>\n              </FormItem>\n              <FormItem prop=\"captcha\">\n                <Row>\n                  <Col span='10'>\n                    <Input size=\"large\" type=\"text\" v-model=\"formPhonePassReset.captcha\" placeholder=\"请输入右侧字符\">\n                    </Input>\n                  </Col>\n                  <Col span='14'>\n                    <captcha :height=\"40\"></captcha>\n                  </Col>\n                </Row>\n              </FormItem>\n              <FormItem prop=\"verify_code\">\n                <Row>\n                  <Col span='10'>\n                    <Input size=\"large\" type=\"text\" v-model=\"formPhonePassReset.verify_code\" placeholder=\"请输入短信验证码\">\n                    </Input>\n                  </Col>\n                  <Col span='14'>\n                    <timer-btn :second=\"6\"></timer-btn>\n                  </Col>\n                </Row>\n              </FormItem>\n              <FormItem>\n                <Row>\n                  <Col span=\"8\">\n                    <Button type=\"primary\" @click=\"nextStep\">下一步</Button>\n                  </Col>\n                </Row>\n              </FormItem>\n            </Form>\n          </Row>\n        </TabPane>\n        <TabPane label=\"通过安全邮箱找回\">\n          <Row>\n            <Steps :current=\"1\">\n              <Step title=\"01\" content=\"验证安全邮箱\"></Step>\n              <Step title=\"02\" content=\"点击校验邮件链接\"></Step>\n              <Step title=\"03\" content=\"输入新密码\"></Step>\n            </Steps>\n          </Row>\n          <Row>\n            <Form ref=\"formEmailPassReset\" :model=\"formEmailPassReset\" :rules=\"passEmailResetDataRules\"  class=\"card-box\">\n              <FormItem prop=\"email\">\n                <Input size=\"large\" type=\"email\" v-model=\"formEmailPassReset.email\" placeholder=\"安全邮箱\" :autofocus=true>\n                  <Icon type=\"ios-email-outline\" slot=\"prepend\"></Icon>\n                </Input>\n              </FormItem>\n              <FormItem>\n                <Button type=\"primary\" @click=\"nextStep\">下一步</Button>\n              </FormItem>\n            </Form>\n          </Row>\n        </TabPane>\n      </Tabs>\n    </Col>\n  </Row>\n</template>\n\n<script>\n  import { authPassReset } from '../api/api'\n  import { mapState, mapActions } from 'vuex'\n  import TimerBtn from '../components/TimerBtn.vue'\n  import Captcha from '../components/Captcha.vue'\n  export default {\n    components: {\n      TimerBtn,\n      Captcha\n    },\n    data () {\n      return {\n        formEmailPassReset: {\n          email: ''\n        },\n        passEmailResetDataRules: {\n          email: [\n            { required: true, message: '请填写安全邮箱地址', trigger: 'blur' }\n          ]\n        },\n        formPhonePassReset: {\n          cell_phone: '',\n          captcha: '',\n          verify_code: ''\n        },\n        passPhoneResetDataRules: {\n          cell_phone: [\n            { required: true, message: '请填写注册使用的手机号', trigger: 'blur' }\n          ],\n          captcha: [\n            { required: true, message: '请填写右边图片字母', trigger: 'blur' }\n          ],\n          verify_code: [\n            { required: true, message: '请填写手机收到的校验码', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    computed: {\n      ...mapState({\n        loginStatus: state => state.login.loginStatus\n      })\n    },\n    methods: {\n      ...mapActions({\n        setToken: 'setToken',\n        setUser: 'setUser'\n      }),\n      handleSubmit (name) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            authPassReset(this.formPassReset).then((res) => {\n              // console.log(res)\n              let {data, status, statusText} = res\n              console.log(data)\n              if (status !== 200) {\n                console.log(statusText)\n                this.$Message.error('发送邮件失败!')\n              } else {\n                // 跳转至用户目标页或默认页\n                if (this.$route.query.redirect) {\n                  this.$router.push(this.$route.query.redirect)\n                } else {\n                  this.$router.push({name: 'p404'})\n                }\n              }\n            }, (error) => {\n              console.log('Error in authPassReset: ' + error)\n              this.$Message.error('发送邮件失败!')\n            }).catch((error) => {\n              console.log('catched in authPassReset:' + error)\n              this.$Message.error('发送邮件失败!')\n            })\n          } else {\n            this.$Message.error('表单验证失败!')\n          }\n        })\n      },\n      formPassResetReset (name) {\n        // console.log('Reset '+ name)\n        this.$refs[name].resetFields()\n      },\n      nextStep () {\n        console.log('next step')\n        this.current = 2\n      }\n    },\n    mounted () {\n      console.log('PassReset mounted')\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  .card-box {\n    padding: 20px\n    /*box-shadow: 0 0px 8px 0 rgba(0, 0, 0, 0.06), 0 1px 0px 0 rgba(0, 0, 0, 0.02);*/\n    -webkit-border-radius: 5px\n    border-radius: 5px\n    -moz-border-radius: 5px\n    background-clip: padding-box\n    margin-bottom: 20px\n    background-color: #F9FAFC\n    /* border: 2px solid #8492A6;*/\n  }\n\n  .login-no-bottom {\n    margin-bottom: 10px\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/PassReset.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Tabs',{staticClass:\"passResetTabs\"},[_c('TabPane',{attrs:{\"label\":\"通过手机号找回\"}},[_c('Row',[_c('Steps',{attrs:{\"current\":1}},[_c('Step',{attrs:{\"title\":\"01\",\"content\":\"验证手机号\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"02\",\"content\":\"重置密码\"}})],1)],1),_vm._v(\" \"),_c('Row',[_c('Form',{ref:\"formPhonePassReset\",staticClass:\"card-box\",attrs:{\"model\":_vm.formPhonePassReset,\"rules\":_vm.passPhoneResetDataRules}},[_c('FormItem',{attrs:{\"prop\":\"cell_phone\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"text\",\"placeholder\":\"注册使用的手机号\",\"autofocus\":true},model:{value:(_vm.formPhonePassReset.cell_phone),callback:function ($$v) {_vm.$set(_vm.formPhonePassReset, \"cell_phone\", $$v)},expression:\"formPhonePassReset.cell_phone\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"0086\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"captcha\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"text\",\"placeholder\":\"请输入右侧字符\"},model:{value:(_vm.formPhonePassReset.captcha),callback:function ($$v) {_vm.$set(_vm.formPhonePassReset, \"captcha\", $$v)},expression:\"formPhonePassReset.captcha\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"14\"}},[_c('captcha',{attrs:{\"height\":40}})],1)],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"verify_code\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"text\",\"placeholder\":\"请输入短信验证码\"},model:{value:(_vm.formPhonePassReset.verify_code),callback:function ($$v) {_vm.$set(_vm.formPhonePassReset, \"verify_code\", $$v)},expression:\"formPhonePassReset.verify_code\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"14\"}},[_c('timer-btn',{attrs:{\"second\":6}})],1)],1)],1),_vm._v(\" \"),_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"8\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.nextStep}},[_vm._v(\"下一步\")])],1)],1)],1)],1)],1)],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"通过安全邮箱找回\"}},[_c('Row',[_c('Steps',{attrs:{\"current\":1}},[_c('Step',{attrs:{\"title\":\"01\",\"content\":\"验证安全邮箱\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"02\",\"content\":\"点击校验邮件链接\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"03\",\"content\":\"输入新密码\"}})],1)],1),_vm._v(\" \"),_c('Row',[_c('Form',{ref:\"formEmailPassReset\",staticClass:\"card-box\",attrs:{\"model\":_vm.formEmailPassReset,\"rules\":_vm.passEmailResetDataRules}},[_c('FormItem',{attrs:{\"prop\":\"email\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"email\",\"placeholder\":\"安全邮箱\",\"autofocus\":true},model:{value:(_vm.formEmailPassReset.email),callback:function ($$v) {_vm.$set(_vm.formEmailPassReset, \"email\", $$v)},expression:\"formEmailPassReset.email\"}},[_c('Icon',{attrs:{\"slot\":\"prepend\",\"type\":\"ios-email-outline\"},slot:\"prepend\"})],1)],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.nextStep}},[_vm._v(\"下一步\")])],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-36cee57c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/pages/PassReset.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-36cee57c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./PassReset.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./PassReset.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./PassReset.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36cee57c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./PassReset.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-36cee57c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/PassReset.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}