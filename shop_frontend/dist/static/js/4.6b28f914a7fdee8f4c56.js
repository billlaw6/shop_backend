webpackJsonp([4],{S2NW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("3cXf"),o=r.n(s),a=r("4YfN"),i=r.n(a),n=r("P9l9"),l=r("9rMa"),c=r("J7R3"),u=r("AHIA"),m={components:{TimerBtn:c.a,Captcha:u.a},data:function(){return{formRegister:{username:"liubin",password1:"woaini2006",password2:"woaini2006",email:"bill_law6@163.com"},registerDataRules:{username:[{required:!0,message:"请填写用户名",trigger:"blur"}],password1:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:8,message:"密码长度不能小于8位",trigger:"blur"}],password2:[{required:!0,message:"请再次输入密码",trigger:"blur"},{type:"string",min:8,message:"密码长度不能小于8位",trigger:"blur"}],email:[{required:!0,message:"请输入常用邮箱",trigger:"blur"},{type:"email",message:"请输入有效邮箱地址",trigger:"blur"}]},registerServerError:{username:"",password:"",email:""}}},computed:i()({},Object(l.c)({loginStatus:function(e){return e.login.loginStatus}})),methods:i()({},Object(l.b)({setToken:"setToken",setLoginStatus:"setLoginStatus",setUser:"setUser"}),{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(n.e)(t.formRegister).then(function(e){console.log(e);var r=e.data,s=e.status,a=e.statusText;201!==s?t.$Message.error("注册失败!"):(console.log("Register OK, statusText: "+a),window.sessionStorage.setItem("accessToken",r.key),Object(n.f)().then(function(e){console.log(e);var r=e.data;200!==e.status?t.$Message.error("获取用户信息失败!"):(console.log(r),t.$store.dispatch("setLoginStatus",!0),t.$store.dispatch("setUser",r),window.sessionStorage.setItem("user",o()(r)),console.log(r.username))},function(e){console.log(e),console.log(e.response)}),t.$route.query.redirect?t.$router.push(t.$route.query.redirect):t.$router.push({name:"p404"}))},function(e){console.log(e.response);var r=e.response,s=r.data,o=r.status,a=r.statusText;t.registerServerError=s,t.$Message.error("注册失败"+o+a)}).catch(function(e){console.log("catched in Register:"+e),t.$Message.error("注册失败")}):t.$Message.error("表单验证失败!")})},formRegisterReset:function(e){this.$refs[e].resetFields()}}),mounted:function(){this.registerServerError={}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[r("Col",{attrs:{span:"7"}},[r("Tabs",{staticClass:"registerTabs"},[r("TabPane",{attrs:{label:"手机号注册"}},[r("i-form",{ref:"formRegister",staticClass:"card-box",attrs:{model:e.formRegister,rules:e.registerDataRules}},[r("Form-item",{staticClass:"register-no-bottom"},[r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[r("i-button",{attrs:{type:"primary",long:!0},on:{click:function(t){e.handleSubmit("formRegister")}}},[e._v("提交")]),e._v(" "),r("captcha")],1)],1),e._v(" "),r("Form-item",{staticClass:"register-no-bottom"},[r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[r("i-button",{attrs:{type:"primary",long:!0},on:{click:function(t){e.handleSubmit("formRegister")}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),r("TabPane",{attrs:{label:"用户名注册"}},[r("i-form",{ref:"formRegister",staticClass:"card-box",attrs:{model:e.formRegister,rules:e.registerDataRules}},[r("Form-item",{attrs:{prop:"username"}},[r("i-input",{attrs:{size:"large",type:"text",placeholder:"用户名",autofocus:!0},model:{value:e.formRegister.username,callback:function(t){e.$set(e.formRegister,"username",t)},expression:"formRegister.username"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1),e._v(" "),e._l(e.registerServerError.username,function(t){return r("li",[e._v(e._s(t))])})],2),e._v(" "),r("Form-item",{attrs:{prop:"password1"}},[r("i-input",{attrs:{size:"large",type:"password",placeholder:"密码"},model:{value:e.formRegister.password1,callback:function(t){e.$set(e.formRegister,"password1",t)},expression:"formRegister.password1"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),r("Form-item",{attrs:{prop:"password2"}},[r("i-input",{attrs:{size:"large",type:"password",placeholder:"密码确认"},model:{value:e.formRegister.password2,callback:function(t){e.$set(e.formRegister,"password2",t)},expression:"formRegister.password2"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1),e._v(" "),e._l(e.registerServerError.password,function(t){return r("li",[e._v(e._s(t))])})],2),e._v(" "),r("Form-item",{attrs:{prop:"email"}},[r("i-input",{attrs:{size:"large",type:"email",placeholder:"邮箱"},model:{value:e.formRegister.email,callback:function(t){e.$set(e.formRegister,"email",t)},expression:"formRegister.email"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-email-outline"},slot:"prepend"})],1),e._v(" "),e._l(e.registerServerError.email,function(t){return r("li",[e._v(e._s(t))])})],2),e._v(" "),r("Form-item",{staticClass:"login-no-bottom"},[r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[r("i-col",{attrs:{col:"12"}},[r("Checkbox-group",{model:{value:e.formRegister.remember,callback:function(t){e.$set(e.formRegister,"remember",t)},expression:"formRegister.remember"}},[r("Checkbox",{attrs:{label:"记住密码",name:"remember"}},[e._v("\n                    同意"),r("router-link",{attrs:{to:"/protocal"}},[e._v('"服务条款"')]),e._v("和"),r("router-link",{attrs:{to:"/privacy"}},[e._v('"隐私权相关政策"')])],1)],1)],1)],1)],1),e._v(" "),r("Form-item",{staticClass:"register-no-bottom"},[r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[r("i-button",{attrs:{type:"primary",long:!0},on:{click:function(t){e.handleSubmit("formRegister")}}},[e._v("提交")])],1)],1)],1)],1)],1)],1),e._v(" "),r("Col",{staticClass:"vertical-divider",attrs:{span:"1"}},[e._v("\n    或\n  ")]),e._v(" "),r("Col",{attrs:{span:"5"}},[e._v("\n    已有账号："),r("br"),e._v(" "),r("router-link",{attrs:{to:"/login"}},[e._v("直接登录"),r("Icon",{attrs:{type:"forward"}})],1),e._v(" "),r("br"),r("br"),r("br"),r("br"),r("br"),e._v("\n    使用以下账号直接登录："),r("br"),e._v(" "),r("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[r("i-col",{attrs:{span:"8"}},[r("Icon",{attrs:{src:"../assets/weibo.png",size:"10"}}),e._v(" "),r("a",{attrs:{href:"http://123.56.115.20/auth/login/weixin"}},[e._v("微信")])],1),e._v(" "),r("i-col",{attrs:{span:"8"}},[r("a",{attrs:{href:"http://123.56.115.20/auth/login/weibo"}},[e._v("微博")])]),e._v(" "),r("i-col",{attrs:{span:"8"}},[r("a",{attrs:{href:"http://123.56.115.20/auth/login/github"}},[e._v("GITHUB")])])],1)],1)],1)},staticRenderFns:[]};var g=r("X4nt")(m,p,!1,function(e){r("lLUc")},"data-v-45a9e36e",null);t.default=g.exports},lLUc:function(e,t){}});
//# sourceMappingURL=4.6b28f914a7fdee8f4c56.js.map