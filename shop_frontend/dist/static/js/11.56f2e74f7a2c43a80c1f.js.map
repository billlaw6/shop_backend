{"version":3,"sources":["webpack:///src/views/StockMoveRecordAdd.vue","webpack:///./src/views/StockMoveRecordAdd.vue?ddd3","webpack:///./src/views/StockMoveRecordAdd.vue"],"names":["StockMoveRecordAdd","_this","this","validator","callback","trigger","required","message","$t","name","decimals","index","computed","extends_default","Object","vuex_esm","availableProducts","availableDepartments","currentDepartment","moveRecordList","_this2","length","_this3","methods","_this4","value","productInfo","_this5","item","selectedProduct","move_amount","batch_no","comment","_this6","toDept","_this7","res","status","emptyMoveRecord","_this8","selectedToDept","views_StockMoveRecordAdd","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","stripe","columns","moveRecordListColumns","data","slot","_v","_s","total","model","formInline","rules","ruleInline","inline","label","prop","placeholder","icon","clearable","on","on-select","handleProductSelected","$$v","$set","expression","_l","option","key","id","_f","sale_price","formInlineErrors","error","_e","max","min","step","type","size","click","$event","addToList","formInlineSubmit","ruleInlineSubmit","directives","rawName","level","submitMoveIn","handleToDeptSelected","code","submitMoveOut","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.56f2e74f7a2c43a80c1f.js","sourcesContent":["<template>\n  <div class=\"stock-move-in\">\n    <Table ref=\"moveRecordList\" stripe :columns=\"moveRecordListColumns\" :data=\"moveRecordList\">\n      <div class=\"table-header\" slot=\"header\">\n        已添加商品\n      </div>\n      <div class=\"table-footer\" slot=\"footer\">\n        共计: <span>{{ total }}</span> 订单，合计: <span></span>\n      </div>\n    </Table>\n\n    <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" inline>\n      <FormItem :label=\"$t('product')\" prop=\"productInfo\">\n        <AutoComplete v-model=\"formInline.productInfo\"\n          :placeholder=\"$t('selectProduct')\"\n          icon=\"ios-search\" \n          :clearable=\"true\"\n          @on-select=\"handleProductSelected\">\n          <Option v-for=\"option in aProduct\" :value=\"option.name\" :key=\"option.id\">\n            <span class=\"product-name\">{{ option.name }}</span>\n            <span class=\"product-price\">{{ option.sale_price | currency }}</span>\n          </Option>\n        </AutoComplete>\n        <ul v-if=\"formInlineErrors.productInfo\" v-for=\"error in formInlineErrors.productInfo\">\n          <li class=\"error\">{{ error }}</li>\n        </ul>\n      </FormItem>\n      <FormItem :label=\"$t('moveAmount')\" prop=\"move_amount\">\n        <InputNumber :max=\"10000\" :min=\"0.1\" :step=\"0.1\" v-model=\"formInline.move_amount\"></InputNumber>\n        <ul v-if=\"formInlineErrors.move_amount\" v-for=\"error in formInlineErrors.move_amount\">\n          <li class=\"error\">{{ error }}</li>\n        </ul>\n      </FormItem>\n      <FormItem :label=\"$t('batchNo')\" prop=\"batch_no\">\n        <Input v-model=\"formInline.batch_no\"></Input>\n        <ul v-if=\"formInlineErrors.batch_no\" v-for=\"error in formInlineErrors.batch_no\">\n          <li class=\"error\">{{ error }}</li>\n        </ul>\n      </FormItem>\n      <FormItem :label=\"$t('comment')\" prop=\"comment\">\n        <Input v-model=\"formInline.comment\" type=\"text\"></Input>\n        <ul v-if=\"formInlineErrors.comment\" v-for=\"error in formInlineErrors.comment\">\n          <li class=\"error\">{{ error }}</li>\n        </ul>\n      </FormItem>\n      <Form-item>\n        <br/>\n        <Button type=\"primary\" size=\"small\" @click=\"addToList()\">{{ $t('addToList') }}</Button>\n      </Form-item>\n    </Form>\n\n    <Form ref=\"formInlineSubmit\" :model=\"formInlineSubmit\" :rules=\"ruleInlineSubmit\" inline>\n      <Tabs>\n        <TabPane v-show=\"currentDepartment.level===1\" :label=\"$t('moveIn')\" icon=\"\">\n          <Form-item>\n            <br/>\n            <Button type=\"primary\" size=\"large\" @click=\"submitMoveIn()\">{{ $t('submitMoveIn') }}</Button>\n          </Form-item>\n        </TabPane>\n        <TabPane :label=\"$t('moveOut')\" icon=\"\">\n          <FormItem :label=\"$t('toDepartment')\" prop=\"toDepartment\">\n            <AutoComplete v-model=\"formInlineSubmit.toDept\"\n              :placeholder=\"$t('selectToDept')\"\n              icon=\"ios-search\" \n              :clearable=\"true\"\n              @on-select=\"handleToDeptSelected\">\n              <Option v-for=\"option in otherDepartments\" :value=\"option.name\" :key=\"option.code\">\n                <span class=\"product-name\">{{ option.name }}</span>\n              </Option>\n            </AutoComplete>\n          </FormItem>\n          <Form-item>\n            <br/>\n            <Button type=\"primary\" size=\"large\" @click=\"submitMoveOut()\">{{ $t('submitMoveOut') }}</Button>\n          </Form-item>\n        </TabPane>\n      </Tabs>\n    </Form>\n  </div>\n</template>\n\n<script>\n  import { mapState, mapGetters, mapActions } from 'vuex'\n  import { addMoveRecord } from '@/http/api'\n\n  export default{\n    components: {\n    },\n    data: function () {\n      const validateProductName = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('noProductError')))\n        } else {\n          if (this.availableProducts.filter((val, index, array) => val.name === value).length > 0) {\n            callback()\n          } else {\n            callback(new Error(this.$t('invalidProductError')))\n          }\n        }\n      }\n      const validateToDepartmentName = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('noDepartmentError')))\n        } else {\n          if (this.otherDepartments.filter((val, index, array) => val.name === value).length > 0) {\n            callback()\n          } else {\n            callback(new Error(this.$t('invalidDepartmentError')))\n          }\n        }\n      }\n      const validateMoveAmount = (rule, value, callback) => {\n        if (!value) {\n          callback(new Error(this.$t('noMoveAmountError')))\n        } else {\n          if (value >= 0.1 && value < 1000) {\n            callback()\n          } else {\n            callback(new Error(this.$t('invalidMoveAmountError')))\n          }\n        }\n      }\n      return {\n        selectedProduct: null,\n        selectedToDept: null,\n        ruleInline: {\n          productInfo: [\n            { validator: validateProductName, trigger: 'blur' },\n            { required: true, message: this.$t('invalidProduct'), trigger: 'blur' }\n          ],\n          move_amount: [\n            // 此两项合并使用时输入了数字也报空\n            // { type: 'number', message: this.$t('invalideNumber'), trigger: 'blur' },\n            // { required: true, message: this.$t('invalidmove_amount'), trigger: 'blur' }\n            // 建议解决方案：Input设为text型，判断空使用系统自带的，判断数字自定义方法。\n            { validator: validateMoveAmount, trigger: 'blur' }\n          ]\n        },\n        ruleInlineSubmit: {\n          toDept: [\n            { validator: validateToDepartmentName, trigger: 'blur' }\n          ]\n        },\n        formInline: {\n          productInfo: '',\n          move_amount: 0.0,\n          batch_no: '',\n          comment: ''\n        },\n        formInlineErrors: {},\n        formInlineSubmit: {\n          toDept: ''\n        },\n        loadingProduct: false,\n        moveRecordListColumns: [\n          {\n            title: this.$t('product'),\n            key: 'product.name',\n            sortable: true,\n            render: (h, params) => {\n              return h('span', params.row.product.name)\n            }\n          },\n          {\n            title: this.$t('salePrice'),\n            key: 'sale_price',\n            sortable: true,\n            render: (h, params) => {\n              return h('span', parseFloat(params.row.product.sale_price).toFixed(this.decimals))\n            }\n          },\n          {\n            title: this.$t('moveAmount'),\n            key: 'move_amount',\n            sortable: true,\n            render: (h, params) => {\n              return h('span', params.row.moveAmount.toFixed(this.decimals))\n            }\n          },\n          {\n            title: this.$t('batchNo'),\n            key: 'batch_no',\n            sortable: true\n          },\n          {\n            title: '操作',\n            key: 'action',\n            render: (h, params) => {\n              return h('Button', {\n                props: {\n                  type: 'error',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px'\n                },\n                on: {\n                  click: () => {\n                    this.removeFromList(params.index)\n                  }\n                }\n              }, this.$t('remove'))\n            }\n          }\n        ]\n      }\n    },\n    computed: {\n      ...mapState('app', {\n        availableProducts: state => state.availableProducts,\n        availableDepartments: state => state.availableDepartments\n      }),\n      ...mapState('login', {\n        currentDepartment: state => state.currentDepartment\n      }),\n      ...mapState('stock', {\n        moveRecordList: state => state.moveRecordList,\n        decimals: state => state.decimals\n      }),\n      ...mapGetters('stock', [\n        'moveRecordListCount',\n        'moveRecordListSum'\n      ]),\n      otherDepartments: function () {\n        // console.log(this.availableDepartments)\n        // console.log(this.currentDepartment)\n        if (this.availableDepartments.length > 0 && this.currentDepartment) {\n          return this.availableDepartments.filter((item, index, array) => {\n            if (this.currentDepartment.code === item.code) {\n              return false\n            } else {\n              if (this.formInlineSubmit.toDept) {\n                if (item.name.toUpperCase().indexOf(this.formInlineSubmit.toDept.toUpperCase()) !== -1) {\n                  return true\n                } else if (item.pinyin.toUpperCase().indexOf(this.formInlineSubmit.toDept.toUpperCase()) !== -1) {\n                  return true\n                } else if (item.py.toUpperCase().indexOf(this.formInlineSubmit.toDept.toUpperCase()) !== -1) {\n                  return true\n                } else {\n                  return false\n                }\n              } else {\n                return true\n              }\n            }\n          })\n        } else {\n          return this.availableDepartments\n        }\n      },\n      total: function () {\n        return this.moveRecordList.length\n      },\n      aProduct: function () {\n        return this.availableProducts.filter((item, index, array) => {\n          if (this.formInline.productInfo) {\n            if (item.name.toUpperCase().indexOf(this.formInline.productInfo.toUpperCase()) !== -1) {\n              return true\n            } else if (item.sale_price.toString().indexOf(this.formInline.productInfo.toUpperCase()) !== -1) {\n              return true\n            } else if (item.pinyin.toUpperCase().indexOf(this.formInline.productInfo.toUpperCase()) !== -1) {\n              return true\n            } else if (item.py.toUpperCase().indexOf(this.formInline.productInfo.toUpperCase()) !== -1) {\n              return true\n            } else {\n              return false\n            }\n          } else {\n            return true\n          }\n        })\n      }\n    },\n    methods: {\n      ...mapActions('app', {\n        setProducts: 'setProducts',\n        setCurrentDepartment: 'setCurrentDepartment'\n      }),\n      ...mapActions('stock', {\n        addMoveRecordItem: 'addMoveRecordItem',\n        removeMoveRecordItem: 'removeMoveRecordItem',\n        emptyMoveRecord: 'emptyMoveRecord',\n        setMoveRecordList: 'setMoveRecordList'\n      }),\n      handleProductSelected: function (value) {\n        this.formInline.productInfo = value\n        if (value) {\n          if (this.formInline.productInfo.length > 0 && this.availableProducts.length > 0) {\n            let tmpProduct = this.availableProducts.filter((val, index, array) => val.name === this.formInline.productInfo)\n            this.selectedProduct = tmpProduct[0]\n          } else {\n            this.$Message.error('invalideProduct')\n          }\n        }\n      },\n      addToList: function () {\n        this.$refs['formInline'].validate((valid) => {\n          if (valid) {\n            // 参数名对应不上时会直接不执行\n            this.$store.dispatch('stock/addMoveRecordItem',\n              { item: this.selectedProduct,\n                moveAmount: this.formInline.move_amount,\n                batchNo: this.formInline.batch_no,\n                comment: this.formInline.comment\n              })\n          } else {\n            this.$Message.error(this.$t('validateFailed'))\n          }\n        })\n      },\n      removeFromList: function (index) {\n        this.removeMoveRecordItem(this.moveRecordList[index])\n      },\n      handleToDeptSelected: function (value) {\n        this.formInlineSubmit.toDept = value\n        if (value) {\n          if (this.formInlineSubmit.toDept.length > 0 && this.otherDepartments.length > 0) {\n            let tmpDepartment = this.otherDepartments.filter((val, index, array) => val.name === this.formInlineSubmit.toDept)\n            this.selectedToDept = tmpDepartment[0]\n          } else {\n            this.$Message.error('invalideToDept')\n          }\n        }\n      },\n      submitMoveIn: function () {\n        if (this.currentDepartment && this.moveRecordList.length > 0) {\n          let params = {\n            deptIn: this.currentDepartment,\n            moveRecordList: this.moveRecordList\n          }\n          addMoveRecord(params).then((res) => {\n            // let { status, data, statusText } = res\n            let { status } = res\n            if (status === 201) {\n              // console.log(data)\n              // console.log(statusText)\n              this.$Message.success(this.$t('submitSucceed'))\n              this.emptyMoveRecord()\n            } else {\n              this.$Message.error(this.$t('failed'))\n            }\n          })\n        } else {\n          this.$Message.error(this.$t('请先录入商品'))\n        }\n      },\n      submitMoveOut: function () {\n        if (this.currentDepartment && this.moveRecordList.length > 0) {\n          let params = {\n            deptOut: this.currentDepartment,\n            deptIn: this.selectedToDept,\n            moveRecordList: this.moveRecordList\n          }\n          addMoveRecord(params).then((res) => {\n            // let { status, data, statusText } = res\n            let { status } = res\n            if (status === 201) {\n              // console.log(data)\n              // console.log(statusText)\n              this.$Message.success(this.$t('submitSucceed'))\n              this.emptyMoveRecord()\n            } else {\n              this.$Message.error(this.$t('failed'))\n            }\n          })\n        } else {\n          this.$Message.error(this.$t('请先录入商品'))\n        }\n      }\n    },\n    mounted () {\n      // this.emptyMoveRecord()\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import '../common/vars'\n  .stock-move-in\n    margin: 6px\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/StockMoveRecordAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stock-move-in\"},[_c('Table',{ref:\"moveRecordList\",attrs:{\"stripe\":\"\",\"columns\":_vm.moveRecordListColumns,\"data\":_vm.moveRecordList}},[_c('div',{staticClass:\"table-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"\\n      已添加商品\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"table-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_vm._v(\"\\n      共计: \"),_c('span',[_vm._v(_vm._s(_vm.total))]),_vm._v(\" 订单，合计: \"),_c('span')])]),_vm._v(\" \"),_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"rules\":_vm.ruleInline,\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":_vm.$t('product'),\"prop\":\"productInfo\"}},[_c('AutoComplete',{attrs:{\"placeholder\":_vm.$t('selectProduct'),\"icon\":\"ios-search\",\"clearable\":true},on:{\"on-select\":_vm.handleProductSelected},model:{value:(_vm.formInline.productInfo),callback:function ($$v) {_vm.$set(_vm.formInline, \"productInfo\", $$v)},expression:\"formInline.productInfo\"}},_vm._l((_vm.aProduct),function(option){return _c('Option',{key:option.id,attrs:{\"value\":option.name}},[_c('span',{staticClass:\"product-name\"},[_vm._v(_vm._s(option.name))]),_vm._v(\" \"),_c('span',{staticClass:\"product-price\"},[_vm._v(_vm._s(_vm._f(\"currency\")(option.sale_price)))])])})),_vm._v(\" \"),_vm._l((_vm.formInlineErrors.productInfo),function(error){return (_vm.formInlineErrors.productInfo)?_c('ul',[_c('li',{staticClass:\"error\"},[_vm._v(_vm._s(error))])]):_vm._e()})],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('moveAmount'),\"prop\":\"move_amount\"}},[_c('InputNumber',{attrs:{\"max\":10000,\"min\":0.1,\"step\":0.1},model:{value:(_vm.formInline.move_amount),callback:function ($$v) {_vm.$set(_vm.formInline, \"move_amount\", $$v)},expression:\"formInline.move_amount\"}}),_vm._v(\" \"),_vm._l((_vm.formInlineErrors.move_amount),function(error){return (_vm.formInlineErrors.move_amount)?_c('ul',[_c('li',{staticClass:\"error\"},[_vm._v(_vm._s(error))])]):_vm._e()})],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('batchNo'),\"prop\":\"batch_no\"}},[_c('Input',{model:{value:(_vm.formInline.batch_no),callback:function ($$v) {_vm.$set(_vm.formInline, \"batch_no\", $$v)},expression:\"formInline.batch_no\"}}),_vm._v(\" \"),_vm._l((_vm.formInlineErrors.batch_no),function(error){return (_vm.formInlineErrors.batch_no)?_c('ul',[_c('li',{staticClass:\"error\"},[_vm._v(_vm._s(error))])]):_vm._e()})],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('comment'),\"prop\":\"comment\"}},[_c('Input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formInline.comment),callback:function ($$v) {_vm.$set(_vm.formInline, \"comment\", $$v)},expression:\"formInline.comment\"}}),_vm._v(\" \"),_vm._l((_vm.formInlineErrors.comment),function(error){return (_vm.formInlineErrors.comment)?_c('ul',[_c('li',{staticClass:\"error\"},[_vm._v(_vm._s(error))])]):_vm._e()})],2),_vm._v(\" \"),_c('Form-item',[_c('br'),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.addToList()}}},[_vm._v(_vm._s(_vm.$t('addToList')))])],1)],1),_vm._v(\" \"),_c('Form',{ref:\"formInlineSubmit\",attrs:{\"model\":_vm.formInlineSubmit,\"rules\":_vm.ruleInlineSubmit,\"inline\":\"\"}},[_c('Tabs',[_c('TabPane',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentDepartment.level===1),expression:\"currentDepartment.level===1\"}],attrs:{\"label\":_vm.$t('moveIn'),\"icon\":\"\"}},[_c('Form-item',[_c('br'),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){_vm.submitMoveIn()}}},[_vm._v(_vm._s(_vm.$t('submitMoveIn')))])],1)],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":_vm.$t('moveOut'),\"icon\":\"\"}},[_c('FormItem',{attrs:{\"label\":_vm.$t('toDepartment'),\"prop\":\"toDepartment\"}},[_c('AutoComplete',{attrs:{\"placeholder\":_vm.$t('selectToDept'),\"icon\":\"ios-search\",\"clearable\":true},on:{\"on-select\":_vm.handleToDeptSelected},model:{value:(_vm.formInlineSubmit.toDept),callback:function ($$v) {_vm.$set(_vm.formInlineSubmit, \"toDept\", $$v)},expression:\"formInlineSubmit.toDept\"}},_vm._l((_vm.otherDepartments),function(option){return _c('Option',{key:option.code,attrs:{\"value\":option.name}},[_c('span',{staticClass:\"product-name\"},[_vm._v(_vm._s(option.name))])])}))],1),_vm._v(\" \"),_c('Form-item',[_c('br'),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){_vm.submitMoveOut()}}},[_vm._v(_vm._s(_vm.$t('submitMoveOut')))])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-18df60b1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/StockMoveRecordAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/.13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18df60b1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/.13.7.0@vue-loader/lib/selector?type=styles&index=0!./StockMoveRecordAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/.13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./StockMoveRecordAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./StockMoveRecordAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18df60b1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/.13.7.0@vue-loader/lib/selector?type=template&index=0!./StockMoveRecordAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-18df60b1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/StockMoveRecordAdd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}