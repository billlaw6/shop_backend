webpackJsonp([12],{"3mrQ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("34v0"),o=a.n(s),n=a("EcfS"),r=a("m4jk"),i={components:{},data:function(){var t=this;return{total:0,stockList:[],keyword:"",dateRange:[new Date((new Date).getTime()-2592e5),new Date((new Date).getTime()+1728e5)],dateOptions:{shortcuts:[{text:"最近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"最近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"最近三个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}}]},pageSize:10,pageNumber:1,stockColumns:[{title:this.$t("product"),key:"product_name",sortable:!0},{title:this.$t("salePrice"),key:"product_sale_price",sortable:!0},{title:this.$t("amount"),key:"amount",sortable:!0},{title:this.$t("batchNo"),key:"batch_no",sortable:!0},{title:this.$t("process"),key:"action",render:function(e,a){return e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleProcessMoveRecord(a)}}},t.$t("toggle"))}}]}},watch:{currentDepartment:function(t,e){this.getStockData(this.pageSize,this.pageNumber)}},computed:o()({},Object(n.e)("login",{currentDepartment:function(t){return t.currentDepartment}}),{aStockList:function(){var t=this;return Array.isArray(this.stockList)?this.stockList.filter(function(e,a,s){return!t.keyword||(-1!==e.product_name.toUpperCase().indexOf(t.keyword.toUpperCase())?s.indexOf(e)===a:-1!==e.product_sale_price.toString().indexOf(t.keyword.toUpperCase())||(-1!==e.product_pinyin.toUpperCase().indexOf(t.keyword.toUpperCase())||(-1!==e.product_py.toUpperCase().indexOf(t.keyword.toUpperCase())||-1!==e.batch_no.toUpperCase().indexOf(t.keyword.toUpperCase()))))}):[]}}),methods:{getStockData:function(t,e){var a=this,s={start:this.dateRange[0].getFullYear()+"-"+(this.dateRange[0].getMonth()+1)+"-"+this.dateRange[0].getDate(),end:this.dateRange[1].getFullYear()+"-"+(this.dateRange[1].getMonth()+1)+"-"+this.dateRange[1].getDate(),keyword:this.keyword,department:this.currentDepartment.code,limit:t,offset:(e-1)*t};console.log(s),Object(r.w)(s).then(function(t){var e=t.status,s=t.data,o=t.statusText;200!==e?(console.log(o),console.log(s)):(a.total=s.count,a.stockList=s.results)})},changePage:function(t){console.log(t),this.pageNumber=t,this.getStockData(this.pageSize,this.pageNumber)},changePageSize:function(t){this.pageSize=t,this.getStockData(this.pageSize,this.pageNumber)}},mounted:function(){this.currentDepartment?this.getStockData(this.pageSize,this.pageNumber):console.log("no currentDepartment")}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stock-list"},[a("Row",{staticClass:"search-box"},[a("Col",{attrs:{span:"6"}},[a("Date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd",options:t.dateOptions,placement:"bottom-start",placeholder:"订单创建时间"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("AutoComplete",{attrs:{placeholder:t.$t("localSearch"),icon:"ios-search",clearable:!0},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},t._l(t.aStockList,function(e){return a("Option",{key:e.id,attrs:{value:e.product_name}},[a("span",{staticClass:"name"},[t._v(t._s(e.product_name))]),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(e.product_sale_price))]),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(e.batch_no))])])}))],1),t._v(" "),a("Col",{attrs:{span:"3"}},[a("i-button",{attrs:{type:"primary"},on:{click:function(e){t.getStockData(t.pageSize,t.pageNumber)}}},[t._v(t._s(t.$t("remoteSearch")))])],1)],1),t._v(" "),a("Table",{ref:"stockList",attrs:{stripe:"",columns:t.stockColumns,data:t.stockList}},[a("div",{staticClass:"table-header",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"text-align":"center",font:"1.8em"}},[t._v("当前库存")])]),t._v(" "),a("div",{staticClass:"table-footer",attrs:{slot:"footer"},slot:"footer"},[t._v("\n      共计: "),a("span",[t._v(t._s(t.total))]),t._v(" 订单，合计: "),a("span")])]),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.pageNumber,"show-sizer":"","show-elevator":"","show-total":"","page-size":t.pageSize,"page-size-opts":[10,20,40,1e4]},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])],1)},staticRenderFns:[]};var l=a("ngHh")(i,c,!1,function(t){a("Grug")},"data-v-219e1d9f",null);e.default=l.exports},Grug:function(t,e){}});
//# sourceMappingURL=12.4547ca3b98fdc5be9693.js.map