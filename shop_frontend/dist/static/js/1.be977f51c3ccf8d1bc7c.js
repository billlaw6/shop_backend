webpackJsonp([1],{XJHN:function(e,t){},dkY9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("3cXf"),r=s.n(o),n=s("4YfN"),a=s.n(n),i=s("P9l9"),c=s("9rMa"),m={data:function(){return{formLogin:{username:"liubin",password:"woaini2006",remember:[]},loginDataRules:{username:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:8,message:"密码长度不能小于8位",trigger:"blur"}]}}},computed:a()({},Object(c.c)({loginStatus:function(e){return e.login.loginStatus}})),methods:a()({},Object(c.b)({setToken:"setToken",setLoginStatus:"setLoginStatus",setUser:"setUser"}),{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(window.sessionStorage.removeItem("accessToken"),Object(i.g)(t.formLogin).then(function(e){var s=e.data,o=e.status,n=e.statusText;200!==o?(console.log(n),t.$Message.error("用户名或密码错误!")):(window.sessionStorage.setItem("accessToken",s.key),Object(i.f)().then(function(e){console.log(e);var s=e.data;200!==e.status?t.$Message.error("获取用户信息失败!"):(console.log(s),t.$store.dispatch("setLoginStatus",!0),t.$store.dispatch("setUser",s),window.sessionStorage.setItem("user",r()(s)),console.log(s.username))},function(e){console.log(e)}),t.$route.query.redirect?t.$router.push(t.$route.query.redirect):t.$router.push({name:"p404"}))},function(e){console.log("Error in authWeixinLogin: "+e),t.$Message.error("用户名或密码错误")}).catch(function(e){console.log("catched in authWeixinLogin:"+e),t.$Message.error("用户名或密码错误")})):t.$Message.error("表单验证失败!"),"记住密码"===t.formLogin.remember[0]?(window.sessionStorage.setItem("username",r()(t.formLogin.username)),window.sessionStorage.setItem("password",r()(t.formLogin.password))):(window.sessionStorage.removeItem("username"),window.sessionStorage.removeItem("password"))})},formLoginReset:function(e){this.$refs[e].resetFields()}}),mounted:function(){sessionStorage.getItem("username")?this.formLogin.username=JSON.parse(sessionStorage.getItem("username")):this.formLogin.username="",sessionStorage.getItem("password")?this.formLogin.password=JSON.parse(sessionStorage.getItem("password")):this.formLogin.password=""}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("i-form",{ref:"formLogin",staticClass:"card-box",attrs:{model:e.formLogin,rules:e.loginDataRules}},[s("Form-item",{staticClass:"formLogin-title"},[s("h3",[e._v("系统登录")])]),e._v(" "),s("Form-item",{attrs:{prop:"username"}},[s("i-input",{attrs:{size:"large",type:"text",placeholder:"用户名",autofocus:!0},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),s("Form-item",{attrs:{prop:"password"}},[s("i-input",{attrs:{size:"large",type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),s("Form-item",{staticClass:"login-no-bottom"},[s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[s("i-col",{attrs:{col:"12"}},[s("Checkbox-group",{model:{value:e.formLogin.remember,callback:function(t){e.$set(e.formLogin,"remember",t)},expression:"formLogin.remember"}},[s("Checkbox",{attrs:{label:"记住密码",name:"remember"}})],1)],1),e._v(" "),s("i-col",{attrs:{col:"12",pull:"2"}},[s("router-link",{attrs:{to:"/pass_reset"}},[e._v("忘记密码?")])],1)],1)],1),e._v(" "),s("Form-item",{staticClass:"login-no-bottom"},[s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[s("i-col",{attrs:{span:"12"}},[s("i-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formLogin")}}},[e._v("登录")])],1),e._v(" "),s("i-col",{attrs:{span:"12"}},[s("router-link",{attrs:{to:"/register"}},[s("i-button",{attrs:{type:"primary"}},[e._v("去注册")])],1)],1)],1)],1),e._v(" "),s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[s("i-col",{attrs:{span:"12"}},[s("a",{attrs:{href:"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx4a32725dfd171687&redirect_uri=http://123.56.115.20&response_type=code&scope=snsapi_base&state=123#wechat_redirect"}},[e._v("微信登录")])])],1)],1)},staticRenderFns:[]};var l=s("X4nt")(m,u,!1,function(e){s("XJHN")},"data-v-743d0eda",null);t.default=l.exports}});
//# sourceMappingURL=1.be977f51c3ccf8d1bc7c.js.map