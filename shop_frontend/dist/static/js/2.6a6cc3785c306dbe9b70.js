webpackJsonp([2],{HXef:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),o=a.n(s),i={name:"WebCamera",data:function(){return{video:null,isShowImg:!1,dataURL:null,videoTrack:null}},methods:{initMedia:function(){var e=this,t=null,a={audio:!0,video:{facingMode:"user",width:{min:320,ideal:800,max:1080},height:{min:240,ideal:600,max:720}}};navigator.mediaDevices.getUserMedia?t=navigator.mediaDevices.getUserMedia(a):navigator.webkitGetUserMedia?t=navigator.webkitGetUserMedia(a):navigator.mozGetUserMedia?t=navigator.mozGetUserMedia(a):navigator.webkitGetUserMedia&&(t=navigator.getUserMedia(a)),null===t?alert("你的浏览器不支持访问用户媒体设备"):t.then(function(t){var a=e.$refs.video;if("srcObject"in a)a.srcObject=t;else{var s=window.URL||window.webkitURL;a.src=s.createObjectURL(t)||t}a.onloadedmetadata=function(e){a.play()},e.video=a,e.videoTrack=t.getTracks()[1]}).catch(function(e){console.log("err.message:"+e.name)})},photo:function(){var e=this,t=e.$refs.img,a=e.$refs.canvas,s=a.getContext("2d");a.width=800,a.height=600,t.height=600,s.drawImage(e.video,0,0,800,600),e.dataURL=a.toDataURL("image/png",.92),t.src=e.dataURL,e.isShowImg=!0},resetPhoto:function(){this.isShowImg=!1},savePhoto:function(){console.log(this.dataURL),this.$Message.success("已经保持了图片的:dataURL")},stopPhoto:function(){null!==this.videoTrack?(console.log("stop"),console.log(this.videoTrack)):console.log(this.videoTrack)}},mounted:function(){this.initMedia()},destroyed:function(){this.stopPhoto()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"web-camera"},[e.isShowImg?e._e():a("div",{staticClass:"border"},[a("span",{staticClass:"top_left"}),e._v(" "),a("span",{staticClass:"top_right"}),e._v(" "),a("span",{staticClass:"bottom_left"}),e._v(" "),a("span",{staticClass:"bottom_right"})]),e._v(" "),a("video",{ref:"video"}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isShowImg,expression:"isShowImg"}],ref:"img",staticClass:"img"})]),e._v(" "),a("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",staticClass:"canvas"})]),e._v(" "),a("div",{staticClass:"button_group"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.isShowImg,expression:"isShowImg"}],attrs:{type:"primary"},nativeOn:{click:function(t){e.resetPhoto(t)}}},[e._v("重新拍照")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.isShowImg,expression:"!isShowImg"}],attrs:{type:"primary"},nativeOn:{click:function(t){e.stopPhoto(t)}}},[e._v("停止画面")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:e.isShowImg,expression:"isShowImg"}],attrs:{type:"primary"},nativeOn:{click:function(t){e.savePhoto(t)}}},[e._v("保存")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.isShowImg,expression:"!isShowImg"}],attrs:{type:"primary"},nativeOn:{click:function(t){e.photo(t)}}},[e._v("拍照")])],1)])},staticRenderFns:[]},r=a("X4nt")(i,n,!1,null,null,null).exports,c=a("9rMa"),l={components:{WebCamera:r},data:function(){return{isCollapsed:!1,editorContent:"",value2:0,setting:{height:"auto",loop:!0,autoplay:!0,autoplaySpeed:2e3,dots:"inside",radiusDot:!1,trigger:"click",arrow:"hover",easing:"ease"}}},computed:o()({},Object(c.c)({user:function(e){return e.login.user}}),{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}}),methods:{collapsedSider:function(){this.$refs.siderMenu.toggleCollapse()},logout:function(e){console.log(e),this.$store.dispatch("setUser",null)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("link",{attrs:{rel:"prefetch",href:"http://123.56.115.20:8080/#/login"}}),e._v(" "),a("Layout",[a("Header",{staticClass:"layout-header-bar"},[a("Menu",{attrs:{mode:"horizontal",theme:"primary","active-name":"1",accordion:!0}},[a("MenuItem",{attrs:{name:"logo"}},[a("div",{staticClass:"layout-logo"},[a("Icon",{attrs:{type:"home"}}),e._v("主页\n          ")],1)]),e._v(" "),a("div",{staticClass:"account-info"},[e.user?[a("MenuItem",{attrs:{name:"userInfo"}},[a("Dropdown",{staticStyle:{"margin-left":"20px"},attrs:{trigger:"click",placement:"bottom-end"}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n                  "+e._s(e.user.username)+"\n                  "),a("Avatar",{attrs:{src:"../assets/logo.png",alt:"Logo"}}),e._v(" "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[e._v("修改密码")]),e._v(" "),a("DropdownItem",{on:{click:e.logout}},[e._v("退出")])],1)],1)],1),e._v(" "),a("MenuItem",{attrs:{name:"msgInfo"}},[a("Icon",{attrs:{type:"ios-navigate"}}),e._v("\n              消息中心\n            ")],1)]:[a("MenuItem",{attrs:{name:"register"}},[e._v("\n              您好！\n              "),a("Icon",{attrs:{type:"person-add"}}),e._v("\n              免费注册 \n            ")],1),e._v(" "),a("MenuItem",{attrs:{name:"login"}},[a("Icon",{attrs:{type:"ios-play"}}),e._v("\n              直接登录\n            ")],1)]],2)],1)],1),e._v(" "),a("Layout",{style:{padding:"0 24px 24px"}},[a("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[a("article",[a("h1",[e._v("Consectetur eaque ex ipsam soluta?")]),e._v("\n          Dolor eveniet quisquam quidem vitae autem, aliquid delectus, rem fuga aspernatur quaerat molestias alias molestiae! Ab rem temporibus expedita illo fugiat eos non. Neque ipsum quam nam sed in incidunt!\n        ")]),e._v(" "),a("web-camera")],1)],1),e._v(" "),a("Footer",{staticClass:"layout-footer-center"},[e._v("2011-2016 © TalkingData")])],1)],1)},staticRenderFns:[]};var v=a("X4nt")(l,u,!1,function(e){a("s95o")},"data-v-670b4a8c",null);t.default=v.exports},s95o:function(e,t){}});
//# sourceMappingURL=2.6a6cc3785c306dbe9b70.js.map